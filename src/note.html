<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="/global/global.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="styleNote.css">

    <title>BlackNotes</title>
</head>

<body>
    <header>

        <div class="logo">
            <a href="index.html">
                <img src="/img/black.webp" alt="logo">
            </a>
        </div>

        <div class="nav">

            <div class="note">

                <button>
                    <span class="material-icons">add</span>
                    <a href="note.html">Nota</a>
                </button>

            </div>

            <div class="login">

                <button>
                    <span class="material-icons">login</span>
                    <a href="login.html">Login</a>
                </button>

            </div>

        </div>
    </header>

    <main>

        <form action="/notes">

            <div id="titleN">
                <input type="text" id="title" placeholder="TÃ­tulo">
            </div>
            

            <div id="description">
                <textarea id="description" placeholder="Escreva algo aqui..."></textarea>
            </div>

            <div id="saveButton">
                <button type="submit">SALVAR</button>
            </div>
            

        </form>

    </main>

    <footer>

        <div>

            <div class="footer-element">
                <img src="/img/github.png" alt="gitIcon">
                <p>Meu GitHub.</p><br>
            </div>

            <div class="footer-element">
                <img src="/img/linkedin.png" alt="linkIcon">
                <p>Meu Linkedin.</p>
            </div>

        </div>

    </footer>

    <script>
        document.querySelector('form[action="notes"]').addEventListener('submit', function(event){
            event.preventDefault();

            const title = document.getElementById('title').value;
            const description = document.getElementById('description').value;

            fetch('http://localhost:3000/note', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({title, description})
            })
            .then(response => {
                if(response.ok){
                    return response.text();
                } else {
                    throw new Error('Erro inesperado.');
                }
            })
            .then(data => alert(data))
            .catch(error => alert(error.menssage));
        });
    </script>

</body>

</html>